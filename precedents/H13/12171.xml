<?xml version="1.0" encoding="UTF-8"?>
<precedent xmlns="http://law.2nx.info/xml_precedent">
  <基本情報>
    <知的財産裁判例>
      <事件番号>平成12(行ケ)250</事件番号>
      <裁判年月日>平成13年11月27日</裁判年月日>
      <裁判所名>東京高等裁判所</裁判所名>
      <権利種別>特許権</権利種別>
      <訴訟類型>行政訴訟</訴訟類型>
      <PDFs>
        <PDF type="全文">http://www.courts.go.jp/hanrei/pdf/00B1524CD6D6DBB749256B53000783BE.pdf</PDF>
      </PDFs>
      <URL>http://www.courts.go.jp/search/jhsp0030?hanreiid=12171&amp;hanreiKbn=07</URL>
    </知的財産裁判例>
  </基本情報>
  <判決文>
    <主文前>
    平成１２年（行ケ）第２５０号審決取消請求事件判決原告サン・マイクロシステムズ・インコーポレーテッド訴訟代理人弁理士山川政樹、黒川弘朗、紺野正幸、西山修、山川茂樹被告特許庁長官及川耕造指定代理人小川謙、関川正志、小林信雄、茂木静代</主文前>
    <主文>
      特許庁が平成１０年審判第１２７２９号事件について平成１２年２月１６日にした審決を取り消す。
      訴訟費用は被告の負担とする。
    </主文>
    <事実及び理由>
      第１　原告の求めた裁判主文第１項同旨の判決。
      
      第２　事案の概要
      
      １　特許庁における手続の経緯原告は、１９８９年５月１８日アメリカ合衆国においてした特許出願に基づく優先権を主張して、平成２年５月１８日、発明の名称を「コンピュータグラフィックス表示装置にボリューム物体をレンダリングする方法および装置」とする発明について特許出願（平成２年特許願第１２７０５３号）したが、平成１０年５月１日拒絶査定があったので、同年８月１９日審判を請求し、平成１０年審判第１２７２９号として審理されたが、平成１２年２月１６日、「本件審判の請求は、成り立たない。」との審決があり、その謄本は同年３月２２日原告に送達された。
      
      ２　本願発明の要旨（請求項３に係る発明（本願第３発明）の要旨。ただし、「○○にしたがって」は「○○に従って」と表記）(u、v、w)ボリューム空間内で表されるボリューム物体の少なくとも一部となるボリュームデータをメモリに格納する手段と、ボリューム物体に対応する少なくとも一つの幾何学的プリミティブを生成する手段であって、その対応する幾何学的プリミティブは複数の境界座標を含む複数の幾何学的座標として表され、その複数の境界座標は対応する幾何学的プリミティブを決め、その対応する幾何学的プリミティブは {x、y、z} 座標空間内で表され、前記幾何学的座標はコンピュータグラフィック表示装置の複数の対応する表示ピクセルを表すものである手段と、各ボリューム物体を対応する幾何学的プリミティブへ整列させる手段と、前記ボリュームデータを境界座標を用いて対応する幾何学的プリミティブの幾何学的座標へマッピングするマッピング関数を生成する手段と、ボリューム物体がマッピングされた対応した幾何学的プリミティブに対して幾何学的操作を実行し、変形された幾何学的プリミティブを得る手段と、前記変形された幾何学的プリミティブの幾何学的座標に従って、前記ボリュームデータを前記生成されたマッピング関数を用いて表示する手段と、を備え、表示されたボリューム物体が対応する幾何学的プリミティブに対して実行された幾何学的操作に従って変形されることを特徴とするコンピュータグラフィック表示装置にボリューム物体をレンダリングする装置。
      
      ３　審決の理由の要点(1)　本願第３発明は、「ボリュームのプリミティブを用いた直接レンダリング装置を得ること」、「ボリュームがマップされた幾何学的なプリミティブに組み込まれたボリュームをレンダリングする装置を得ること」及び「ボリュームが幾何学的物体に相互作用させることができるようにした、ボリュームをレンダリングする装置を得ること」を目的とし、特許請求の範囲の請求項３に記載された事項により上記２の本願発明の要旨のとおりのものと認める。(2)　刊行物記載発明原査定の拒絶の理由に引用された特開平１－９８０８４号公報（刊行物）には、「操作が容易で３次元空間での座標指定や計測が容易に行える３次元画像処理装置を提供すること」を目的とし、「第１図は本発明の一実施例を示すブロック図である。同図において１はＣＴ像やＭＲＩ像等の多層スライスデータを記憶している原データ記憶装置であり、２は３次元データ作成装置であり、３は表示装置であり、４は前記３次元データ作成装置２の任意の座標点を指定する３次元座標指定装置であり、５は指定された座標点間の距離を計測する装置であり、６は指定座標点間を結ぶ２本の線の角度を計測する装置であり、７は指定座標点によって囲まれた閉空間又は閉曲面を作成する装置であり、８は前記閉空間又は閉曲面内の体積を計測する装置である。前記３次元画像作成装置２内にはＭＰＲ像作成装置９Ａ及び割面像作成装置９Ｂを備えたＭＰＲ、割面像作成部９が設けられている。前記ＭＰＲ、割面像作成部９の詳細を第２図に示す。これは同図に示すように原スライス像データを記憶する第１の３次元メモリ１１と、この３次元メモリから読み出されたデータをｘｙ面（アキシャル面）、ｙｚ面（サジタル面）、ｘｚ面（コロナル面）に振り分けてＭＰＲ像を作成する装置１２と、この装置１２から出力されるデータをアファイン変換する装置１３と、前記２次元メモリ１２の出力とアファイン変換装置１３の出力により割面像を作成する第２の２次元メモリ１４と、指定３次元座標Ｐ（ｘ、ｙ、ｚ）に基づいて前記３次元メモリ１１の読み出しアドレスを指定するリードアドレスジェネレータ１５及び第２の２次元メモリ１４の書き込みアドレスを指定するライトアドレスジェネレータ１６とによって構成されている。尚、ここで重要なことは、原データ記憶手段１，３次元画像作成手段２，表示手段３の座標系を共通にさせていることである。このようにすれば、３次元画像作成手段２への座標指定だけで共通の座標指定が行える。このように座標系を共通化する方法としては、各処理部における座標系を一致させるとか、あるいは異なる座標系である場合は座標変換を行って関連付けるようにする方法を採用すればよい。」（２頁右上欄１行～同頁左下欄１９行）、「次に第６図乃至第８図をも参照して本発明の作用を説明する。通常のスライス像の場合は、複数のスライスのうち任意のスライス像上の任意の位置に座標点を指定し各点をある共通の座標系で表現する（Ｐ１（ｘ１，ｙ１，ｚ１）、Ｐ２（ｘ２，ｙ２，ｚ２）、・・Ｐｎ（ｘｎ，ｙｎ，ｚｎ）の如く）が、これは第２図の３次元メモリ１１のアドレスを指定し、それを表示に供することによって行われるもので、従来の手法と同じである。ＭＰＲ像の場合は、第２図の２次元メモリ１２におけるアキシャル面（ｘｙ面）、サジタル面（ｙｚ面）、コロナル面（ｘｚ面）を第６図に示すように視線方向に応じて第３角図法的に表示し、互いに割面を表すＲＯＩＦ１，Ｆ２，Ｆ３のラインの交点Ｐを指定座標点として定義しておけばよい。割面像の場合も同様に第７図のように構成された割面像の３面Ｆ１，Ｆ２，Ｆ３の交点Ｐ（ｘ、ｙ、ｚ）を座標点として定義しておく。」（２頁右下欄１３行～３頁左上欄１２行）、「３次元表面表示の場合は第８図のように切削機能により内部の指定したい部位が見える位置まで切削しながら順次座標点を定義してゆく。」（３頁右上欄２行～４行）、「いかなる表示モダリテイーを用いて座標点を定義したとしても、一旦指定されれば同一の座標系で表現されるので、その座標点を用いて・・体積等を容易に測定することができる。」（３頁左下欄１行～５行）、とする発明（刊行物記載発明）が示されている。(3)　対比・判断本願第３発明と刊行物記載発明とを対比するに、ソリッドモデル等の３次元形状モデルを計算機内に構築する機能として３次元形状モデラは周知事項である。中身の詰まった形状の構造解析にはソリッドモデルが適していることは周知事項である。モデラの主な機能として、ソリッドモデルを定義するときに使う機能で、円柱、円錐などの基本立体（プリミティブ）を生成する機能、及び、ソリッドモデルで形状を大局的に変形させて目的の形状を作るときに用いる機能で、基本立体どうしの和、積及び差の３種類の立体集合演算機能、は周知事項である。また、イメージ生成の手段として、３次元形状モデラを使ってソリッドモデルで定義することは周知事項である。そして、刊行物記載発明の「ＣＴ像やＭＲＩ像」、「多層スライスデータ」、「指定３次元座標（ｘ、ｙ、ｚ）」、「３次元画像処理装置」及び「切削、回転」は、本願第３発明の「ボリューム物体」、「ボリュームデータ」、「幾何学的座標」、「コンピュータグラフィック表示装置」及び「幾何学的操作」に相当し、刊行物記載発明の「多層スライスデータ」が変換前の空間のデータである点で本願第３発明の「ボリュームデータ」に相当するといえることから、刊行物記載発明の「ＣＴ像やＭＲＩ像等の多層スライスデータを記憶している原データ記憶装置１」は、本願第３発明の「ボリューム空間内で表されるボリューム物体の少なくとも一部となるボリュームデータをメモリに格納する手段」に相当し、刊行物記載発明の「３次元画像処理装置にボリューム物体をレンダリングする装置」は本願第３発明の「コンピュータグラフィック表示装置にボリューム物体をレンダリングする装置」に相当するので、両者は、「ボリューム空間内で表されるボリューム物体の少なくとも一部となるボリュームデータをメモリに格納する手段を備え、コンピュータグラフィック表示装置にボリューム物体をレンダリングする装置」で一致し、①　本願第３発明が「ボリューム物体に対応する少なくとも一つの幾何学的プリミティブを生成する手段であって、その対応する幾何学的プリミティブは複数の境界座標を含む複数の幾何学的座標として表され、その複数の境界座標は対応する幾何学的プリミティブを決め、その対応する幾何学的プリミティブは {x、y、z} 座標空間内で表され、前記幾何学的座標はコンピュータグラフィック表示装置の複数の対応する表示ピクセルを表すものである手段」を有するのに対し、刊行物記載発明は「ボリューム物体に対応する少なくとも一つの点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを生成する手段であって、その対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍは座標として表され、その座標は対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを決め、その対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像ＭはＰ{x、y、z} 座標空間内で表され、前記座標はコンピュータグラフィック表示装置の表示ピクセルを表すものである手段」を有する点、②　本願第３発明が「各ボリューム物体を対応する幾何学的プリミティブへ整列させる手段」を有するのに対し、刊行物記載発明は「各ボリューム物体を対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍへ整列させる手段」を有する点、③　本願第３発明が「ボリュームデータを境界座標を用いて対応する幾何学的プリミティブの幾何学的座標へマッピングするマッピング関数を生成する手段」を有するのに対し、刊行物記載発明は「ボリュームデータを座標を用いて対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍの幾何学的座標へマッピングするマッピング関数を生成する手段」を有する点、④　本願第３発明では「ボリューム物体がマッピングされた対応した幾何学的プリミティブに対して幾何学的操作を実行し、変形された幾何学的プリミティブを得る手段」を有するのに対し、刊行物記載発明は「ボリューム物体がマッピングされた対応した点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して幾何学的操作を実行し、変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを得る手段」を有する点、⑤　本願第３発明が「変形された幾何学的プリミティブの幾何学的座標に従って、ボリュームデータを前記生成されたマッピング関数を用いて表示する手段」を有するのに対し、刊行物記載発明は「変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍの幾何学的座標に従って、ボリュームデータを前記生成されたマッピング関数を用いて表示する手段」を有する点、⑥　本願第３発明では「表示されたボリューム物体が対応する幾何学的プリミティブに対して実行された幾何学的操作に従って変形される」のに対して、刊行物記載発明は「表示されたボリューム物体が対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して実行された幾何学的操作に従って変形される」点、で相違する。（相違点について）プリミティブが複数の境界座標を含む複数の座標として表されること、及び、プリミティブが複数の対応する表示ピクセルにより表されることは、周知事項である。また、本願明細書にも「マッピング関数は、ボリューム空間中の各ボクセルをプリミティブの素子すなわち点に関連づける。」（８頁１６～１７行）として上記周知事項と同趣旨の記載がある。そこで、相違点①～⑥のすべてについて審究するに、相違点①～⑥は、結局、ボリューム物体に対応する表示座標系における対象が、本願第３発明では「幾何学的プリミティブ」であるのに対し刊行物記載発明では「点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍ」である点、に帰結する。しかしながら、プリミティブに基づいて３次元形状を構成することは上記のように周知事項であってみれば、相違点①～⑥は、刊行物記載発明において、ボリュームデータにマッピングされる表示座標系における対象を周知なプリミティブとしたことにすぎず、当業者が必要に応じて周知事項に基づいて容易に発明をすることができたものといえる。(4)　審決の結び以上のとおりであるから、本願第３発明は、刊行物記載発明及び周知事項に基づいて当業者が容易に発明をすることができたものであるから、特許法２９条２項の規定により特許を受けることができない。
      
      第３　原告主張の審決取消事由
      
      １　取消事由１（刊行物記載発明の認定の誤り）(1)　相違点①の認定における刊行物記載発明の認定の誤り審決は、「刊行物記載発明は『ボリューム物体に対応する少なくとも一つの点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを生成する手段であって、その対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍは座標として表され、その座標は対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを決め、その対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍは Ｐ{x、y、z} 座標空間内で表され、前記座標はコンピュータグラフィック表示装置の表示ピクセルを表すものである手段』を有する」と認定したが、誤りである。刊行物には、「第３図は３次元座標の定義を説明するためのものであり、３次元画像Ｍを３次元座標軸ｘ、ｙ、ｚに対応させたときの点Ｐ（Ｘ、Ｙ、Ｚ）の座標は、原スライスデータを３次元メモリに取り込んだときの座標点Ｐに対応するように定義したものである。」（２頁右下欄１～７行）と記載されており、３次元座標指定装置４の３次元座標を単純に説明し、それがメモリの座標の点Ｐと同じであると指摘しているだけであり、画像Ｍと点Ｐとは直接的な関係はない。もちろん、ｐ｛ｘ、ｙ、ｚ｝座標空間内に画像Ｍが存在し得るのは当然であるが、刊行物に示された点Ｐはｐ｛ｘ、ｙ、ｚ｝座標空間内の１点であり、表示しようとする３面（アキシャル面、コロナル面、サジタル面）が交差する中心となる位置（原点）でしかない。刊行物記載発明は、この点Ｐを３次元座標指定装置４で指定して、その点Ｐを原点に設定したときに定まる３面それぞれにおける画像Ｍを見せるものにすぎない。したがって、画像Ｍが点Ｐとして表されるというような記載は刊行物にはない。「座標はコンピュータグラフィック表示装置の表示ピクセルを表す」との認定についても、座標点Ｐ（Ｘ、Ｙ、Ｚ）は画面上に表示するものではなく、表示するときに基準になる点（原点）を示しているにすぎない。したがって、点Ｐが表示装置の表示ピクセルを表すことはない。刊行物第３図で幾何学的な立方体のように見えるものは、一般的な数学の教科書などで、３次元のｐ｛ｘ、ｙ、ｚ｝座標空間内で点Ｐをｘ、ｙ、ｚそれぞれの座標軸に対応させるために図示した補助的な線にすぎず、画像とは無関係である。(2)　相違点②の認定における刊行物記載発明の認定の誤り審決は「刊行物記載発明は『各ボリューム物体を対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍへ整列させる手段』を有する」と認定したが、誤りである。刊行物が座標系の変換に関して言及していることは認めるが、座標系を変換することが「各ボリューム物体を対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍへ整列させる」ことにはつながらない。刊行物記載発明においては、３次元画像Ｍは、表示装置の画面で表示させようとする対象そのものであって、３次元のｐ｛ｘ、ｙ、ｚ｝座標空間に対応しているとはいえるが、３次元画像Ｍは何かを整列させるものではない。(3)　相違点③の認定における刊行物記載発明の認定の誤り審決は、「刊行物記載発明は『ボリュームデータを座標を用いて対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍの幾何学的座標へマッピングするマッピング関数を生成する手段』を有する」と認定したが、誤りである。刊行物には３次元画像Ｍへ整列させることが記載されていないので、当然にマッピングに関しての記載もない。座標系の変換は座標系を変換させるだけでよく、一般的にマッピング関数のようなものは使用する必要はない。(4)　相違点④～⑥の認定における刊行物記載発明の認定の誤り審決は、「刊行物記載発明は『ボリューム物体がマッピングされた対応した点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して幾何学的操作を実行し、変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを得る手段』を有する」、「刊行物記載発明は『変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍの幾何学的座標に従って、ボリュームデータを前記生成されたマッピング関数を用いて表示する手段』を有する点」、及び「刊行物記載発明は「『表示されたボリューム物体が対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して実行された幾何学的操作に従って変形される』」と認定したが、誤りである。(3)で述べたように、刊行物記載発明ではマッピング関数を用いていないのであるから、「マッピング」の点で誤りである。また、刊行物には３次元画像Ｍに幾何学的操作を加えることは記されているが、「表示されたボリューム物体が対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像」というものはない。刊行物記載発明では画面に表示しようとしている３次元画像Ｍに幾何学的な操作を加えているにすぎない。
      
      ２　取消事由２（進歩性の判断の誤り）取消事由１で述べたとおり、審決は刊行物記載発明の認定を誤り、この誤った認定に基づいて相違点の判断をしたのであるから、その判断も誤りである。刊行物記載発明は、原データを３次元メモリに記憶しておき、そのデータを３つの面に振り分けて２次元メモリに記憶させ、１点Ｐ（Ｘ、Ｙ、Ｚ）を通る３つの面を２次元メモリから表示させるものである。特定の点Ｐを通る３面の絵を表示するようにした発明であって、それ以外のものではなく、本願第３発明の特徴である、プリミティブにデータを配置、すなわちマッピングすることは記載されていない。したがって、刊行物記載発明においても、点Ｐを動かせばあらゆる箇所を表示することは可能であるが、特定の３面の像が得られるだけである。これに対し、本願第３発明は、プリミティブの中にデータが詰まっているので、どこで切っても、切り口の座標値に対応するデータを表示することができる。被告は、「本願第３発明と刊行物記載発明とは、要するに、画像データを画素として扱うかプリミティブとして扱うかの相違があるにすぎない。」と主張するが、本願第３発明は、プリミティブとしてデータを扱っているのではなく、画像データをプリミティブにマッピングすることが主要な技術的思想である。
      
      第４　審決取消事由に対する被告の反論
      
      １　取消事由１に対して(1)　相違点①における刊行物記載発明の認定の誤りの主張に対して刊行物記載発明は、多層スライス像を用いてＭＰＲ表示や３次元表面表示、割面表示、合成表示等を行う３次元画像処理装置に関するものであり、３次元画像Ｍは、第３図からも明らかなように、Ｐ｛ｘ、ｙ、ｚ｝座標空間内の少なくとも一つの座標点Ｐ（Ｘ、Ｙ、Ｚ）として表され、座標点Ｐ（Ｘ、Ｙ、Ｚ）は、３次元画像Ｍの各画素のｘｙｚ座標上での位置とそれらの描画属性を表していることは明らかである。原告主張のように、３次元座標指定装置４で指定される原点のみを示しているものではない。なお、刊行物第３図記載の立方体は、その引き出し線から、３次元画像Ｍを示すことは明らかである。原告は、「点Ｐが表示装置の表示ピクセルを表すことはない。」とも主張するが、座標点Ｐ（Ｘ、Ｙ、Ｚ）は、３次元画像Ｍを表すものであり、３次元画像Ｍの一点一点である座標点Ｐ（Ｘ、Ｙ、Ｚ）は表示装置の表示ピクセルに対応してその表示ピクセルを表すものであるから、原点の座標点Ｐ（Ｘ、Ｙ、Ｚ）のみが表示装置の表示ピクセルの一つに対応するというものではない。(2)　相違点②における刊行物記載発明の認定の誤りの主張に対して刊行物には、「ここで重要なことは、原データ記憶手段１、３次元画像作成手段２、表示手段３の座標系を共通にさせていることである。・・・このように座標系を共通化する方法としては、各処理部における座標系を一致させるとか、あるいは異なる座標系である場合は座標変換を行って関連付けるようにする方式を採用すればよい。」（２頁左下欄１１～１９行）との記載がある。この記載が、原データ記憶手段１における座標系と３次元画像作成手段２及び表示手段３における座標系とが異なる場合があり、その場合に原データ記憶手段１における座標系を３次元画像作成手段２及び表示手段３における座標系に変換することを表していることは、当業者に明らかである。そして、座標変換の過程における関連付けが本願第３発明でいう「整列」といえるものであるから、審決には、相違点②に関し原告主張の認定の誤りはない。(3)　相違点③における刊行物記載発明の認定の誤りの主張に対して(2)で述べたように、刊行物記載発明は、各ボリューム物体を対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍへ整列させることをも考慮しており、その整列のためにはマッピング関数が必要になるものであるから、審決には、相違点③に関し原告主張の認定の誤りはない。(4)　相違点④～⑥における刊行物記載発明の認定の誤りの主張に対して審決は、本願第３発明と刊行物記載発明との対比において、刊行物記載発明の「切削、回転」が本願第３発明の「幾何学的操作」に相当するとしており、この点は原告も認めている。そして、その幾何学的操作を実行するために刊行物記載発明が「ボリューム物体がマッピングされた対応した点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して幾何学的操作を実行し、変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを得る手段」を有することは明らかであるから、相違点④における刊行物記載発明の認定に誤りはない。刊行物記載発明は、切削、回転という変形がなされた３次元画像を表示することができるものであり、その表示に際して原データ記憶手段１、３次元画像作成手段２、表示手段３における座標系の変換を行うこと、すなわちマッピング関数を用いることも考慮されているから、相違点⑤及び⑥における刊行物記載発明の認定にも誤りはない。
      
      ２　取消事由２に対して前項に述べたとおり、審決には刊行物記載発明の認定に係る誤りはなく、この誤りを前提とする原告主張は失当である。原告は、「刊行物記載発明においても、点Ｐを動かせばあらゆる箇所を表示することは可能であるが、特定の３面の像が得られるだけである。これに対し、本願第３発明は、プリミティブの中にデータが詰まっているので、どこで切っても、切り口の座標値に対応するデータを表示することができる。」と主張するが、本願第３発明は、ボリューム物体の変形とその表示について、ボリューム物体をどのように切るか、その切り口をどのような方向から見るか等の、ボリューム物体の変形とその表示の態様を何ら限定するものではない。刊行物記載発明は、記憶されたボリュームデータあるいはそれを座標変換したボリュームデータに対して切削や回転といった幾何学的操作を実行し、その実行により変形されたボリューム物体を表示するものであるから、ボリュームデータを幾何学的プリミティブにより取り扱うかどうかの点は別にして、ボリューム物体の変形とその表示において本願第３発明と差異がなく、原告の主張は、本願第３発明の構成に基づくものではない。本願第３発明と刊行物記載発明とは、要するに、画像データを画素として扱うかプリミティブとして扱うかの相違があるにすぎない。すなわち、本願第３発明は、ボリューム物体に対応する表示座標系における対象を幾何学的プリミティブという基本立体にし、その幾何学的プリミティブに対して幾何学的操作を実行するのに対し、刊行物記載発明は、ボリューム物体に対応する表示座標系における対象を画素という基本単位にし、その画素に対して幾何学的操作を実行するという相違があるにすぎない。審決は、その相違を認め、３次元形状の構成をプリミティブに基づいて行うことが周知であることを勘案してその相違における本願第３発明の構成が容易であると判断したものであるから、進歩性の判断においても誤りはない。
      
      第５　当裁判所の判断
      
      １　本願第３発明について(1)　本願明細書の記載事項甲第３号証（平成１０年８月１９日付け手続補正書）及び甲第５号証（平成９年１２月２日付け手続補正書）によれば、本願明細書に次のような記載があることが認められる。〔従来の技術〕ボリュームデータは「ボクセル（ｖｏｘｅｌ）」と呼ばれるボリューム素子の三次元アレイにより表される。各ボクセルには、ボリューム空間内のそれの場所を表す３つの整数座標と、その場所におけるある特性、例えば温度又は組成、これはレンダリング属性には直接には関係しない、を表す、その密度と呼ばれる少なくとも１つの整数値とが組合わされる。他方、幾何学的データはｘ、ｙ、ｚ座標位置と、色のようなレンダリング属性とによって表される。（３頁２７行～４頁４行）〔発明が解決しようとする課題〕したがって、本発明の目的は、ボリュームのプリミティブを用いた直接レンダリングの方法と装置を得ることである。本発明の別の目的は、ボリュームがマップされた幾何学的なプリミティブに組み込まれたボリュームをレンダリングする方法と装置を得ることである。本発明の更に別の目的は、ボリュームを幾何学的物体に相互作用させることができるようにした、ボリュームをレンダリングする方法と装置を得ることである。（８頁３～９行）〔課題を解決するための手段〕・・・好適な実施態様においては、レンダリングすべきボリューム又はボリューム部分は１つ又は複数の幾何学的なプリミティブにより境界が決められ、三次元多角形のような幾何学的なプリミティブをボリュームに関連づけるマッピングが発生される。その後で、ボリュームに対する任意の幾何学的操作が幾何学的なプリミティブに対して行われ、かつマッピング関数を用いてボリュームを幾何学的空間へ変換することによりボリュームデータが表示される。ボリュームを囲む多角形は、頂点が－１から＋１の範囲である正規化された立方体のような立方体であることが好ましい。多角形のような幾何学的なプリミティブの関数としてボリュームを定義することにより、クリッピング又は回転のような幾何学的操作をプリミティブに対して容易に行うことができ、マッピング関数を調べて、表示すべき対応するボリュームデータを決定するためにデータが用いられる。さらに、生のボリュームデータは幾何学的空間内に直接レンダリングされるから、幾何学的データを生のボリュームデータと容易に相互作用させることができる。（８頁２０行～９頁４行）〔方法の概観〕本発明の方法と装置においては、ボリューム物体又はボリューム物体の一部が１つ又は複数の幾何学的なプリミティブに整列させられ、幾何学空間内の幾何学的なプリミティブとボリューム空間内のボリューム物体との間のマッピング関数が発生される。このマッピング関数の使用によってボリュームがマップされるプリミティブに対して幾何学的な演算を行い、かつ対応するボリュームデータに変換するだけで、変換、ビューイング及びその他の幾何学的操作がボリュームに対して実行できる。ボリュームデータ、すなわち、ボリューム空間内の特定の場所におけるボリュームの属性を含んでいるボリューム物体を表すボクセルが、ボリューム物体を表すボクセルの三次元アレイ内の各ボクセルの位置に従ってメモリに格納される。ボリューム物体を表示するために、そのボリューム物体は例えば立方体である少なくとも１つの幾何学的なプリミティブによって記述される。使用する幾何学的なプリミティブは、レンダリングすべきボリューム又はボリュームの一部をそのプリミティブヘマップできるような寸法にし、かつそのようにマップできるようにして整列させるべきである。・・・例えば、第２図を参照する。ボリュームベクトル８０を表すボリュームの一部を幾何学的ベクトルへマップし、スクリーン空間に表示できる。ひとたびマップされたそのベクトルは、ボリュームベクトルがマップされた幾何学的ベクトルに対して回転／移動操作を行い、かつマッピング関数を用いて対応するボリューム要素を探すことだけで、幾何学的空間内で容易に回転及び移動できる。（１１頁１２行～１２頁５行）本願第２図立方体のような三次元物体を形成する１つ又は複数の幾何学的なプリミティブヘボリュームがマップされる。立方体はボリュームの境界を定めるようにボリュームを囲むように並べられる。第４ａ図に示すように、ボリューム物体１５０は立方体１６０により囲まれる。ボリュームと立方体の｛ｘ，ｙ，ｚ｝座標とを含むボクセルの間にマッピング関数が発生する。そのマッピング関数が発生されると、その立方体に対して行われる操作を通じて、ボリューム物体に各種の幾何学的操作を加えることができる。例えば、立方体１６０にクリップ操作を加えることによりボリューム１７０の一部１７５を除去、その結果として現れたボリュームの映像を第４ｂ図に示すように容易に表示できる。本願第４図マッピング関数は、（ｕ，ｖ，ｗ）空間とも呼ばれるボリューム空間内のボリューム物体の各ボクセルと、｛ｘ，ｙ，ｚ｝空間（幾何学的空間）内の幾何学的なプリミティブの頂点すなわち格子点との間の数学的な対応性を与える。ボリュームの境界が幾何学的なプリミティブの境界ヘマップされるように、ボリューム物体が幾何学的なプリミティブに「合致される」ということができる。（１２頁１７行～１３頁１行）マッピング関数がひとたび決定されると、幾何学的物体に対して行われる幾何学的操作の修正すなわち処理を、ボリュームがマップされる幾何学的なプリミティブを介してボリューム物体に対して行うことができる。種々の見る寸法と、縦横比又はボリュームデータの透視を達成するために、変換マトリックスが幾何学的なプリミティブヘ乗じられる。したがって、その変換マトリックスは、幾何学的なプリミティブヘマップされたボリュームデータを修正する。（１４頁６～１１行）(2)　これらの記載によると、本願第３発明は、三次元アレイにより表されるボリュームデータを、プリミティブを用いてレンダリングする（見える状態にする）装置であるということができる。本願第３発明の「プリミティブ」とは、「ボリューム物体を対応する幾何学的プリミティブへ整列させる」こと（「整列」とは不明確であるが、ここでは、「ボリューム物体」を完全に収容するという程度の意味であり、「プリミティブ」とは単純に立方体と考えて検討する。）のできる仮想的な空間であって、その空間に対して幾何学的操作（クリップ操作等）を行えるものであると理解することができる。ボリューム空間とプリミティブは、生成された「マッピング関数」で対応しており、ボリューム空間内の各データ（色、濃度等）を対応するプリミティブの各座標に与えるものである。レンダリングに当たっては、プリミティブに幾何学的操作を実行し、表示する部分を決定後、その表示部分に対応するボリューム空間内のデータを探し出し（マッピング関数を用いる。「マッピング関数を用いて対応するボリューム要素を探す」との記載による。）、そのデータをプリミティブの表示部分の各座標に割り当てる（再び、マッピング関数を用いる）ことにより、ボリューム物体が表示されることになる。したがって、プリミティブは、幾何学的操作を実行する対象、及び表示に直接関わる対象として位置づけられており、ボリュームデータはこのプリミティブを中間段階として経由することで、表示されるものである。
      
      ２　取消事由１についての判断(1)　刊行物記載発明の「３次元画像Ｍ」について検討する。甲第４号証（刊行物）によれば、刊行物記載の発明に関して次のとおり認めることができる。刊行物の「多層スライスデータを記憶する手段と、該スライスデータから複数種類の３次元画像を作成する手段と、これら３次元画像を表示する手段」（特許請求の範囲）との記載によれば、「３次元画像」は複数種類あり、作成された「３次元画像」は表示されるものである。そして第１図には、符番２で示される「３次元画像作成装置」内に、「ＭＰＲ像作成装置９Ａ」、「割面像作成装置９Ｂ」、「３次元表面像作成装置」、及び「合成像作成装置１０」が配置されており、上記「複数種類」とは「ＭＰＲ像」、「割面像」、「３次元表面像」、及び「合成像」を指すものと認められ、これらの像が第１図の「表示装置３」に表示されるものと認められる。「ＭＰＲ、割面像作成部９の詳細を第２図に示す。・・・原スライス像データを記憶する第１の３次元メモリ１１と、・・・指定３次元座標Ｐ（ｘ、ｙ、ｚ）に基づいて前記３次元メモリ１１の読み出しアドレスを指定するリードアドレスジェネレータ１５及び第２の２次元メモリ１４の書き込みアドレスを指定するライトアドレスジェネレータ１６とによって構成されている。」（２頁右上欄１６行～左下欄１１行）、「３次元画像Ｍを３次元座標軸ｘ，ｙ，ｚに対応させたときの点Ｐ（Ｘ、Ｙ、Ｚ）の座標は、原スライスデータを３次元メモリに取り込んだときの座標点Ｐに対応するように定義したものである」（２頁右下欄３～７行）、及び「ＭＰＲ像の場合は、・・・互いに割面を表すＲＯＩＦ１，Ｆ２，Ｆ３のラインの交点Ｐを指定座標点として定義しておけばよい。割面像の場合も・・・割面像の３面Ｆ１，Ｆ２，Ｆ３の交点Ｐ（ｘ、ｙ、ｚ）を座標点として定義しておく。」（３頁左上欄３～１２行）との記載によれば、３次元画像であるＭＰＲ像及び割面像は、割面像の３面Ｆ１，Ｆ２，Ｆ３の交点Ｐ（ｘ、ｙ、ｚ）を指定することにより、これら３次元像が作成されるのであるから、個々の３次元像と指定座標点Ｐ（ｘ、ｙ、ｚ）は１対１の対応関係にあり、刊行物の「３次元画像Ｍを３次元座標軸ｘ，ｙ，ｚに対応させた」（２頁右下欄３～４行）との記載もこれと同趣旨と解され、「３次元画像Ｍ」は作成された個々の３次元画像を意味するものである。なお、第３図には、｛ｘ、ｙ、ｚ｝空間内に、直方体状のものが示され、そこに引き出し線が設けられ、符番Ｍと表示されているところ、直方体の１つの頂点がＰ（Ｘ、Ｙ、Ｚ）と表示されていることからみて、直方体のＰ（Ｘ、Ｙ、Ｚ）を含む３面が、表示される３面であることを図示したものと解される。すなわち、ＭＰＲ像及び割面像は、３次元データから作成された像であって、３次元画像と称されるものではあるが、具体的には３つの割面像を１つの像として表現するものであるから、２次元像であり、そのことは刊行物第２図において、「２次元メモリ１２」及び「２次元メモリ１４」に記憶されていること、及び一般に表示装置自体が２次元であることから明らかである。刊行物第３図(2)　甲第４号証によれば、刊行物には更に、「３次元表面表示の場合は第８図のように切削機能により内部の指定したい部位が見える位置まで切削しながら順次座標点を定義してゆく。」（３頁右上欄２行～４行）、との記載があり、第８図には、表面像に対して切削範囲及び切削深さを設定することにより切削された表面像が作成・表示される様子、及び切削された表面像を９０度回転したものが図示されている。ここで「切削」とは表面に表れない内部を部分的に表示するものと解され、その内部の像を作成する手段について刊行物には特段の記載がないため、ＭＰＲ像及び割面像同様に、「２次元メモリ１２」に記憶される３つの割面像を用いると解するほかはない。そうすると、切削範囲及び切削深さを設定することは、切削されることにより露出する３つの割面を決定することにほかならず、３つの割面は、「３次元座標指定装置４」による座標指定により行われると理解される。刊行物第８図そして、３次元画像Ｍは、座標指定により作成・表示された個々の画像であるから、もはやそれに対して何らかの幾何学的操作を実行することはないというべきである。なぜなら、その画像に対して切削された関係にある画像が新たに作成・表示されることはあっても、その新たな画像は、座標指定を新たに行うことによって作成されるものである。したがって、切削前後の「３次元画像Ｍ」を比較する限りにおいては、「３次元画像Ｍ」が切削されたとはいい得るものではあるが、その切削、すなわち、新たな座標指定が「３次元画像Ｍ」に対して行われているものとは認められないのである。審決は、「切削、回転」が「幾何学的操作」に相当すると認定し、この認定は原告も争っていないものの、回転された「３次元画像Ｍ」をいかに作成するかについて、刊行物に一切記載がないことから、回転操作が「３次元画像Ｍ」に対して行われると認めることもできない。(3)　したがって、「刊行物記載発明は『ボリューム物体がマッピングされた対応した点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して幾何学的操作を実行し、変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍを得る手段』を有する」、及び「刊行物記載発明は 『表示されたボリューム物体が対応する点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍに対して実行された幾何学的操作に従って変形される』」との審決の認定は、「幾何学的操作」を実行する対象が「３次元画像Ｍ」であると認定した点において誤りである。そして、変形された３次元画像Ｍとは変形後に表示される３次元画像にほかならず、これに対してはもはや何の操作も行わないのであるから、「変形された点Ｐ（Ｘ、Ｙ、Ｚ）の座標の３次元画像Ｍの幾何学的座標に従って、ボリュームデータを前記生成されたマッピング関数を用いて表示する手段」との審決の認定も誤りであるというべきである。(4)　以上によると、審決は、刊行物記載発明の認定において、３次元画像Ｍに対して幾何学的操作を実行すると認定した点（相違点④及び⑥に関する認定）、及び変形された３次元画像Ｍの幾何学的座標に従って、マッピング関数を用いて表示すると認定した点（相違点⑤に関する認定）において誤りであり、取消事由１は理由がある。
      
      ３　取消事由２についての判断(1)　本願第３発明は、「ボリューム物体がマッピングされた対応した幾何学的プリミティブに対して幾何学的操作を実行し、変形された幾何学的プリミティブを得る手段」と「前記生成されたマッピング関数を用いて、変形された幾何学的プリミティブの幾何学的座標に従って、前記ボリュームデータを表示する手段」とを備えることにより、「表示されたボリューム物体が対応する幾何学的プリミティブに対して実行された幾何学的操作に従って変形される」ことを構成要件とし、幾何学的操作の実行対象が幾何学的プリミティブである。そして、変形後の幾何学的プリミティブの幾何学的座標に従い、マッピング関数を用いてボリュームデータを表示するものである。これに対し、刊行物記載発明では、幾何学的操作の実行対象が３次元画像Ｍではないこと、及び変形後の３次元画像Ｍに対しては何の操作も施されないことは、取消事由１に関して判断したとおりである。(2)　審決は、「ソリッドモデル等の３次元形状モデルを計算機内に構築する機能として３次元形状モデラは周知事項である。中身の詰まった形状の構造解析にはソリッドモデルが適していることは周知事項である。モデラの主な機能として、ソリッドモデルを定義するときに使う機能で、円柱、円錐などの基本立体（プリミティブ）を生成する機能、及び、ソリッドモデルで形状を大局的に変形させて目的の形状を作るときに用いる機能で、基本立体どうしの和、積及び差の３種類の立体集合演算機能、は周知事項である。また、イメージ生成の手段として、３次元形状モデラを使ってソリッドモデルで定義することは周知事項である」こと、「プリミティブが複数の境界座標を含む複数の座標として表されること、及び、プリミティブが複数の対応する表示ピクセルにより表されることは、周知事項である」ことに基づいて、「相違点①～⑥は、刊行物記載発明において、ボリュームデータにマッピングされる表示座標系における対象を周知なプリミティブとしたことにすぎず、当業者が必要に応じて周知事項に基づいて容易に発明をすることができたものといえる。」と判断した。しかしながら、審決が相違点の認定を一部誤っていることは取消事由１に関して判断したとおりであって、この誤った相違点の認定を前提にした上記相違点に関する判断も誤ったものというべきである。そもそも、審決には、上記周知事項と相違点①～⑥との間にいかなる関係があるのかについての説示がなく、これら相違点に係る本願第３発明の構成が、刊行物記載発明に周知事項をどのように適用することによって、これら相違点に係る本願第３発明の構成に至るのかについての判断はないのである。
      
      第６　結論以上の審決の誤りは、本願第３発明の進歩性を否定した審決の結論に影響を及ぼすものであるから、原告主張の審決取消事由は理由があり、原告の請求は認容されるべきである。（平成１３年１１月６日口頭弁論終結）東京高等裁判所第１８民事部
    </事実及び理由>
    <裁判官>
      <裁判長裁判官>永井紀昭</裁判長裁判官>
      <裁判官>塩月秀平</裁判官>
      <裁判官>橋本英史</裁判官>
    </裁判官>
  </判決文>
</precedent>
